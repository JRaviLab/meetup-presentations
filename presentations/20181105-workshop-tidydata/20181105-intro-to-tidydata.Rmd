---
title: "Intro to Tidy Data w/ R"
description: |
  Resource for introduction to the tidyverse package
author:
  - name: Janani Ravi & Nafiseh? Kayla? 
    url: https://jananiravi.github.io
    affiliation: R-Ladies East Lansing
    affiliation_url: https://rladies-eastlansing.github.io
date: "`r Sys.Date()`"
output:
  radix::radix_article:
    toc: TRUE
    toc_depth: 3
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  warning = TRUE,
  message = TRUE,
  # comment = "##",
  R.options = list(width = 60)
)
```

# Part 1: Getting Started
## Installation and set-up
### Install RStudio
http://rstudio.com/download

### Install tidyverse & other datasets
```{r 1.1.2, eval=FALSE, echo=TRUE}
install.packages("tidyverse")
install.packages("gapminder")
```

### Load tidyverse & other datasets
```{r 1.1.3, eval=TRUE, echo=TRUE}
library(tidyverse)
library(gapminder)
```

## Data import
```{r 1.2, eval=FALSE, echo=TRUE}
read_csv()		# comma-separated values, as exported from excel/spreadsheets
read_delim()	# any delimitter
# Other useful packages
readxl::read_excel()	# By Jenny Bryan
```

## Loading existing datasets
We will work with the Gapminder dataset by Hans Rosling

### Gapminder:  Unveiling the beauty of statistics for a fact based world view.
https://www.gapminder.org/

Hans Rosling's TED talks:
https://www.ted.com/playlists/474/the_best_hans_rosling_talks_yo


![](https://gcn.com/~/media/GIG/GCN/Redesign/Articles/2017/March/bubble.png){width=50%}

## Knowing your data

```{r echo=TRUE, eval=T}
# gapminder::gapminder
str(gapminder)		# Structure of the dataframe
gapminder 			# Data is in a cleaend up 'tibble' format by default
head(gapminder)		# Shows the top few observations (rows) of your data frame
glimpse(gapminder)	# Info-dense summary of the data
View(gapminder)		# View data in a visual GUI-based spreadsheet-like format
```

***
# Part 2: Reshaping data with tidyr
```{r 2, echo=TRUE, eval=FALSE}
gather()	# Gather COLUMNS -> ROWS
spread()	# Spread ROWS -> COLUMNS
separate()	# Separate 1 COLUMN -> many COLUMNS
unite()		# Unite several COLUMNS -> 1 COLUMN
```

## Gather

## Spread

## Separate

## Unite

***
# Part 3: Data wranging with dplyr
```{r 3, echo=TRUE, eval=FALSE}
filter()	# PICK observations by their values | ROWS
select()	# PICK variables by their names | COLUMNS
mutate()	# CREATE new variables w/ functions of existing variables | COLUMNS
transmute()	# COMPUTE 1 or more COLUMNS but drop original columns
arrange()	# REORDER the ROWS
summarise()	# COLLAPSE many values to a single SUMMARY
group_by()	# GROUP data into rows with the same value of variable (COLUMN)
```

## Filter
```{r echo=TRUE, eval=TRUE}
str(gapminder)	# Structure of the dataframe
# Now, filter by year and look at only the data from the year 1962
filter(gapminder, year==1962)

# Can be rewritten using "Piping" %>%
gapminder %>%	# Pipe ('then') operator to serially connect operations
	filter(year==1962)
```

## Arrange
```{r echo=TRUE, eval=TRUE}
# Arrange/Sort by Life Expectency
arrange(gapminder, lifeExp)	# ascending order
arrange(gapminder, -lifeExp)	# desceding order

# Want to rewrite using piping?
gapminder %>%	# Pipe ('then') operator to serially connect operations
	arrange(lifeExp)
```
## Select

## Mutate

## Summarise

***
# Part 4: Visualizing tidy data with ggplot
## Recap of ggplot2

## gganimate
```{r 4.2.1, echo=TRUE, eval=TRUE}
library(tidyverse)
library(gapminder)
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
    geom_point(alpha = 0.7, show.legend = FALSE) +
    scale_colour_manual(values = country_colors) +
    scale_size(range = c(2, 12)) +
    scale_x_log10() + theme_minimal() +
    facet_wrap(~continent)
```

```{r 4.2.2, echo=TRUE, eval=TRUE}
library(gganimate)
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
    geom_point(alpha = 0.7, show.legend = FALSE) +
    scale_colour_manual(values = country_colors) +
    scale_size(range = c(2, 12)) +
    scale_x_log10() + theme_minimal() +
    facet_wrap(~continent) +
    # Here comes the gganimate specific bits
    labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
    transition_time(year) +
    ease_aes('linear')
```

# Part 5: Export & Wrap-up
## Saving your plots
### ggsave

## Saving your data files
### write_delim

## *What you learnt today!*
